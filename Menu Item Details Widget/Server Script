(function() {
	data.actions = {
		ADD_ITEM_TO_CART: 'ADD_ITEM_TO_CART'
	};
	
	/* Using the CartJS Scriptable Endpoint */
	//////////////////////////////////////////////////
	
	var cart = new sn_sc.CartJS('DEFAULT', '' + gs.getUser().getID());
	
	/* Add Item to Cart Using CartJS Scriptable Method */
	//////////////////////////////////////////////////
	
	function addItemToCart(itemId) {
		cart.addToCart({sysparm_id: itemId});
	}
	
	/* Routes Actions to Methods on the Server Script */
	//////////////////////////////////////////////////
	
	var handlers = {};
	handlers[data.actions.ADD_ITEM_TO_CART] = addItemToCart;
	
	function actionHandler(action) {
		action = (action || '').trim();
		if (!action) {
			throw 'valid action was not provided';
		}

		var handler = handlers[action];
		if (typeof handler !== 'function') {
			throw action + ' is not a valid action';
		}

		return handler;
	}
	
	/* Server Script execution when there is user input. Nothing happens on inital load.  */
	//////////////////////////////////////////////////
	
	if (input) { // client is requesting updates
		actionHandler(input.action)(input.payload);
	}
})();
